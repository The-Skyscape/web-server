<label class="text-xs font-bold opacity-60 -mb-3 tracking-wider">
  About This Project
</label>
<p class="px-3 text-base font-semibold opacity">
  {{.Description}}
</p>

<label class="text-xs font-bold opacity-60 -mb-3 tracking-wider">
  Launched Apps
</label>
<div class="py-2">
  <div class="card bg-neutral/40 shadow-lg shadow-primary">
    {{with .Apps}}
    <ul class="menu menu-lg w-full" hx-boost="true">
      {{range .}}
      <li><a href="{{host}}/app/{{.ID}}">
          {{.Name}}

          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 320 512" height="1em" width="1em"
            xmlns="http://www.w3.org/2000/svg" class="ml-auto">
            <path
              d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z">
            </path>
          </svg>
        </a></li>
      {{end}}
    </ul>

    {{with auth.CurrentUser}}
    {{if eq .ID $.OwnerID}}
    <div class="card-body pt-0">
      <button class="btn btn-sm btn-primary mt-4" _="on click call launch_app_modal.showModal()">
        Launch an App
      </button>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <div class="card-body">
      <h2 class="text-base font-semibold opacity-90 mx-auto">
        No apps yet
      </h2>

      {{with auth.CurrentUser}}
      {{if eq .ID $.OwnerID}}
      <button class="btn btn-sm btn-primary mt-4" _="on click call launch_app_modal.showModal()">
        Launch an App
      </button>
      {{end}}
      {{end}}
    </div>
    {{end}}
  </div>
</div>

<div class="flex flex-col gap-2">
  <label class="text-xs font-bold opacity-60 tracking-wider">
    User Comments
  </label>

  {{with auth.CurrentUser}}
  <form class="flex flex-col w-full" hx-post="{{host}}/repos/{{$.ID}}/comments" hx-target=".error">
    <textarea required name="content" class="textarea w-full"
      placeholder="Leave a comment for this project..."></textarea>
    <div class="flex items-center justify-between px-4 pt-2">
      <span class="text-sm font-semibold opacity-60">
        @{{.Handle}}
      </span>

      <button class="btn btn-xs btn-secondary">
        Post
      </button>
    </div>

    <div class="error"></div>
  </form>
  {{end}}

  {{range .Comments}}
  <div class="flex flex-col gap-2 w-full py-2">
    {{with .User}}
    <div class="flex items-center gap-2 px-2">
      <div class="avatar">
        <div class="w-5 p-0.5 bg-base-100 shadow-xl rounded-full">
          <img src="{{.Avatar}}" alt="{{.Name}}" class="rounded-full">
        </div>
      </div>

      <span class="text-xs font-semibold opacity-70">
        @{{.Handle}}
      </span>
    </div>
    {{end}}

    <div class="chat chat-start">
      <div class="chat-bubble w-full shadow max-w-none bg-neutral/60 min-h-20">
        {{.Content}}
      </div>
    </div>
  </div>
  {{end}}
</div>