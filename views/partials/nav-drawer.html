<div class="bg-base-300 min-h-full w-80 px-4 py-6 flex flex-col gap-4">
  <div class="px-2">
    {{with auth.CurrentUser}}
    <a href="{{host}}/profile" class="flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-colors">
      <div class="w-11 h-11 rounded-full bg-white/10 border border-white/10 p-0.5 shrink-0">
        <img src="{{.Avatar}}" alt="{{.Name}}" class="rounded-full w-full h-full">
      </div>
      <div class="min-w-0">
        <div class="font-semibold truncate">{{.Name}}</div>
        <div class="text-sm text-white/60">@{{.Handle}}</div>
      </div>
    </a>
    {{else}}
    <a href="{{host}}/" class="flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 transition-colors">
      <div class="w-11 h-11 rounded-full bg-base-100 border border-white/20 p-2 shrink-0">
        <img src="{{host}}/public/logo.svg" alt="Logo" class="w-full h-full">
      </div>
      <div class="min-w-0">
        <div class="font-semibold">The Skyscape</div>
        <div class="text-sm text-white/60">Join Today</div>
      </div>
    </a>
    {{end}}
  </div>

  <ul class="menu menu-xl space-y-4 w-full" hx-boost="true">
    <li>
      <a href="{{host}}/" {{if path_eq "" }}class="menu-active" {{end}}>
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" height="1em"
          width="1em" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
          </path>
        </svg>
        Home
      </a>
    </li>

    <li>
      <a href="{{host}}/profile" {{if path_eq "profile" }}class="menu-active" {{end}}>
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
          stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 20a6 6 0 0 0-12 0"></path>
          <circle cx="12" cy="10" r="4"></circle>
          <circle cx="12" cy="12" r="10"></circle>
        </svg>
        Profile
      </a>
    </li>

    <li>
      <a href="{{host}}/explore" {{if path_eq "explore" }}class="menu-active" {{end}}>
        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M347.94 129.86L203.6 195.83a31.938 31.938 0 0 0-15.77 15.77l-65.97 144.34c-7.61 16.65 9.54 33.81 26.2 26.2l144.34-65.97a31.938 31.938 0 0 0 15.77-15.77l65.97-144.34c7.61-16.66-9.54-33.81-26.2-26.2zm-77.36 148.72c-12.47 12.47-32.69 12.47-45.16 0-12.47-12.47-12.47-32.69 0-45.16 12.47-12.47 32.69-12.47 45.16 0 12.47 12.47 12.47 32.69 0 45.16zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm0 448c-110.28 0-200-89.72-200-200S137.72 56 248 56s200 89.72 200 200-89.72 200-200 200z">
          </path>
        </svg>
        Explore
      </a>
    </li>

    <li>
      <a href="{{host}}/messages" {{if path_eq "messages" }}class="menu-active" {{end}}>
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
          stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
        Messages
        {{$unreadCount := messages.UnreadCount}}
        {{if gt $unreadCount 0}}
        <span class="badge badge-primary badge-sm">{{$unreadCount}}</span>
        {{end}}
      </a>
    </li>

    <li>
      <a href="{{host}}/users" {{if path_eq "users" }}class="menu-active" {{end}}>
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
          stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        Users
      </a>
    </li>

    <li>
      <a href="{{host}}/repos" {{if path_eq "repos" }}class="menu-active" {{end}}>
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
          stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z">
          </path>
          <path d="M12 22V12"></path>
          <path d="m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7"></path>
          <path d="m7.5 4.27 9 5.15"></path>
        </svg>
        Repos
      </a>
    </li>

    <li>
      <a href="{{host}}/apps" {{if path_eq "apps" }}class="menu-active" {{end}}>
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" height="1em"
          width="1em" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
        Apps
      </a>
    </li>
  </ul>


  {{with auth.CurrentUser}}
  {{if .IsAdmin}}
  <div class="mt-auto px-2">
    <div class="rounded-xl bg-warning/20 border border-warning/30 p-4">
      <h3 class="font-semibold text-warning mb-3">Admin Account</h3>
      <a target="_blank" href="https://hq.theskyscape.com" class="btn btn-sm btn-warning w-full mb-2">
        Open Admin Panel
      </a>
      <button _="on click call verify_modal.showModal()" class="btn btn-sm btn-ghost w-full">
        Preview Verification
      </button>
    </div>
  </div>
  {{else}}
  <div class="mt-auto px-2">
    <div class="rounded-xl bg-primary/10 border border-primary/20 p-4 text-center">
      <h3 class="font-semibold mb-3">Get Verified</h3>
      <button _="on click call verify_modal.showModal()" class="btn btn-sm btn-primary w-full">
        Learn More
      </button>
    </div>
  </div>
  {{end}}
  {{else}}
  <div class="mt-auto px-2">
    <div class="rounded-xl bg-primary/10 border border-primary/20 p-4 text-center" hx-boost="true">
      <h3 class="font-semibold mb-3">Join The Skyscape</h3>
      <a href="{{host}}/" class="btn btn-sm btn-primary w-full mb-2">
        Create an Account
      </a>
      <a href="{{host}}/signin?next={{req.URL.Path}}" class="btn btn-sm btn-ghost w-full">
        Sign In
      </a>
    </div>
  </div>
  {{end}}
</div>