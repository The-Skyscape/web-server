{{$app := apps.CurrentApp}}
{{$user := auth.CurrentUser}}
{{$comments := apps.Comments}}
{{$limit := apps.CommentLimit}}
{{$nextPage := apps.CommentNextPage}}

{{range $index, $comment := $comments}}
{{if eq (mod (add $index 1) $limit) 0}}
<div hx-get="{{host}}/app/{{$app.ID}}/comments?page={{$nextPage}}&limit={{$limit}}" hx-trigger="revealed" hx-swap="afterend"
  hx-select="#app-comments > *">
  {{template "app-comment.html" $comment}}
</div>
{{else}}
{{template "app-comment.html" $comment}}
{{end}}
{{end}}
