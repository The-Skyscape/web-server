<div class="flex flex-col gap-4 w-full md:w-1/3 md:max-w-sm px-4 py-6">
  <p class="text-lg opacity-80 font-semibold tracking-wide leading-relaxed">
    {{or .Description ""}}
  </p>

  <!-- Followers Section -->
  <div class="flex flex-col gap-3 pt-2 border-t border-white/10">
    <div class="flex gap-4 text-sm">
      <a href="{{host}}/user/{{.Handle}}/followers" class="hover:underline" hx-boost="true">
        <span class="font-bold">{{.FollowersCount}}</span> Followers
      </a>
      <a href="{{host}}/user/{{.Handle}}/following" class="hover:underline" hx-boost="true">
        <span class="font-bold">{{.FollowingCount}}</span> Following
      </a>
    </div>

    {{$followersCount := .FollowersCount}}
    {{$handle := .Handle}}
    {{with .RecentFollowers 3}}
    <!-- Desktop: List view -->
    <div class="hidden md:flex flex-col gap-2">
      {{range .}}
      {{with .Follower}}
      <a href="{{host}}/user/{{.Handle}}" class="flex items-center gap-2 hover:opacity-80 transition" hx-boost="true">
        <div class="avatar">
          <div class="w-8 rounded-full bg-base-100 p-0.5 border border-white/10">
            <img src="{{.Avatar}}" alt="{{.Name}}" class="rounded-full">
          </div>
        </div>
        <div class="flex flex-col">
          <div class="flex items-center gap-1">
            <span class="text-sm font-medium">{{.Name}}</span>
            {{if .Verified}}{{template "verified-badge.html"}}{{end}}
          </div>
          <span class="text-xs opacity-60">@{{.Handle}}</span>
        </div>
      </a>
      {{end}}
      {{end}}
      {{if gt $followersCount 3}}
      <a href="{{host}}/user/{{$handle}}/followers" class="flex items-center gap-2 hover:opacity-80 transition" hx-boost="true">
        <div class="avatar">
          <div class="w-8 rounded-full bg-base-100 border border-white/10 flex items-center justify-center">
            <span class="text-xs text-white/60">+{{sub $followersCount 3}}</span>
          </div>
        </div>
        <div class="flex flex-col">
          <span class="text-sm font-medium text-white/60">View all</span>
        </div>
      </a>
      {{end}}
    </div>

    <!-- Mobile: Avatar stack -->
    <div class="md:hidden avatar-group -space-x-4">
      {{range .}}
      {{with .Follower}}
      <a href="{{host}}/user/{{.Handle}}" class="avatar" hx-boost="true">
        <div class="w-10 rounded-full border-2 border-base-100">
          <img src="{{.Avatar}}" alt="{{.Name}}" title="{{.Name}}" />
        </div>
      </a>
      {{end}}
      {{end}}
      {{if gt $followersCount 3}}
      <a href="{{host}}/user/{{$handle}}/followers" class="avatar" hx-boost="true">
        <div class="w-10 rounded-full border-2 border-base-100 bg-base-100 flex items-center justify-center">
          <span class="text-xs text-white/60">+{{sub $followersCount 3}}</span>
        </div>
      </a>
      {{end}}
    </div>
    {{end}}
  </div>

  <!-- Thoughts Section -->
  {{$thoughtsCount := .ThoughtsCount}}
  {{with .RecentThoughts 3}}
  <div class="flex flex-col gap-3 pt-4 border-t border-white/10">
    <h3 class="text-sm font-bold opacity-60 uppercase tracking-wider">Thoughts</h3>
    <div class="flex flex-col gap-3" hx-boost="true">
      {{range .}}
      <a href="{{host}}/thought/{{.ID}}" class="flex items-center gap-2 hover:opacity-80 transition">
        <div class="flex items-center justify-center w-7 h-7 mr-1 rounded bg-accent/20 text-accent shrink-0">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-3.5 h-3.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
          </svg>
        </div>
        <div class="flex flex-col flex-1 min-w-0">
          <span class="text-sm font-medium truncate">{{.Title}}</span>
          <span class="text-xs opacity-60 whitespace-nowrap">{{.CreatedAt.Format "Jan 2, 2006"}} · {{.ViewsCount}} views</span>
        </div>
      </a>
      {{end}}
      {{if gt $thoughtsCount 3}}
      <a href="{{host}}/user/{{$handle}}/thoughts" class="flex items-center gap-2 hover:opacity-80 transition">
        <div class="flex items-center justify-center w-7 h-7 rounded bg-base-100 border border-white/10 shrink-0">
          <span class="text-xs text-white/60">+{{sub $thoughtsCount 3}}</span>
        </div>
        <span class="text-sm font-medium text-white/60">View all</span>
      </a>
      {{end}}
    </div>
  </div>
  {{end}}

  <!-- Projects Section -->
  {{$projectsCount := .ProjectsCount}}
  {{with .RecentProjects}}
  <div class="flex flex-col gap-3 pt-4 border-t border-white/10">
    <h3 class="text-sm font-bold opacity-60 uppercase tracking-wider">Projects</h3>
    <div class="flex flex-col gap-3" hx-boost="true">
      {{range .}}
      <a href="{{host}}/project/{{.ID}}" class="flex items-center gap-2 hover:opacity-80 transition">
        <div class="flex items-center justify-center w-7 h-7 mr-1 rounded bg-info/20 text-info shrink-0">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-3.5 h-3.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9l3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605" />
          </svg>
        </div>
        <div class="flex flex-col flex-1 min-w-0">
          <div class="flex items-center gap-2">
            <span class="text-sm font-medium truncate">{{.Name}}</span>
            {{with .StarsCount}}<span class="text-xs opacity-50 shrink-0">★ {{.}}</span>{{end}}
          </div>
          <span class="text-xs opacity-60 truncate">{{with .Description}}{{.}}{{else}}No description{{end}}</span>
        </div>
      </a>
      {{end}}
      {{if gt $projectsCount 3}}
      <a href="{{host}}/user/{{$handle}}/projects" class="flex items-center gap-2 hover:opacity-80 transition">
        <div class="flex items-center justify-center w-7 h-7 rounded bg-base-100 border border-white/10 shrink-0">
          <span class="text-xs text-white/60">+{{sub $projectsCount 3}}</span>
        </div>
        <span class="text-sm font-medium text-white/60">View all</span>
      </a>
      {{end}}
    </div>
  </div>
  {{end}}

  <!-- Apps Section -->
  {{$appsCount := .AppsCount}}
  {{with .RecentApps}}
  <div class="flex flex-col gap-3 pt-4 border-t border-white/10">
    <h3 class="text-sm font-bold opacity-60 uppercase tracking-wider">Apps</h3>
    <div class="flex flex-col gap-3" hx-boost="true">
      {{range .}}
      <a href="{{host}}/app/{{.ID}}" class="flex items-center gap-2 hover:opacity-80 transition">
        <div class="flex items-center justify-center w-7 h-7 mr-1 rounded bg-primary/20 text-primary shrink-0">
          <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" class="h-3.5 w-3.5" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
          </svg>
        </div>
        <div class="flex flex-col flex-1 min-w-0">
          <div class="flex items-center gap-2">
            <span class="text-sm font-medium truncate">{{.Name}}</span>
            {{with .AuthorizedUsersCount}}<span class="text-xs opacity-50 shrink-0">{{.}} users</span>{{end}}
          </div>
          <span class="text-xs opacity-60 truncate">{{with .Description}}{{.}}{{else}}No description{{end}}</span>
        </div>
      </a>
      {{end}}
      {{if gt $appsCount 3}}
      <a href="{{host}}/user/{{$handle}}/apps" class="flex items-center gap-2 hover:opacity-80 transition">
        <div class="flex items-center justify-center w-7 h-7 rounded bg-base-100 border border-white/10 shrink-0">
          <span class="text-xs text-white/60">+{{sub $appsCount 3}}</span>
        </div>
        <span class="text-sm font-medium text-white/60">View all</span>
      </a>
      {{end}}
    </div>
  </div>
  {{end}}

  <!-- Repos Section -->
  {{$reposCount := .ReposCount}}
  {{with .RecentRepos}}
  <div class="flex flex-col gap-3 pt-4 border-t border-white/10">
    <h3 class="text-sm font-bold opacity-60 uppercase tracking-wider">Repos</h3>
    <div class="flex flex-col gap-3" hx-boost="true">
      {{range .}}
      <a href="{{host}}/repo/{{.ID}}" class="flex items-center gap-2 hover:opacity-80 transition">
        <div class="flex items-center justify-center w-7 h-7 mr-1 rounded bg-secondary/20 text-secondary shrink-0">
          <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-3.5 w-3.5" xmlns="http://www.w3.org/2000/svg">
            <path d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"></path>
            <path d="M12 22V12"></path>
            <path d="m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7"></path>
            <path d="m7.5 4.27 9 5.15"></path>
          </svg>
        </div>
        <div class="flex flex-col flex-1 min-w-0">
          <div class="flex items-center gap-2">
            <span class="text-sm font-medium truncate">{{.Name}}</span>
            {{with .StarsCount}}<span class="text-xs opacity-50 shrink-0">★ {{.}}</span>{{end}}
          </div>
          <span class="text-xs opacity-60 truncate">{{with .Description}}{{.}}{{else}}No description{{end}}</span>
        </div>
      </a>
      {{end}}
      {{if gt $reposCount 3}}
      <a href="{{host}}/user/{{$handle}}/repos" class="flex items-center gap-2 hover:opacity-80 transition">
        <div class="flex items-center justify-center w-7 h-7 rounded bg-base-100 border border-white/10 shrink-0">
          <span class="text-xs text-white/60">+{{sub $reposCount 3}}</span>
        </div>
        <span class="text-sm font-medium text-white/60">View all</span>
      </a>
      {{end}}
    </div>
  </div>
  {{end}}
</div>
