<dialog id="oauth_enable_modal" class="modal">
  <div class="modal-box max-w-2xl">
    <h3 class="font-bold text-lg mb-4">Enable OAuth</h3>

    <div class="error-message text-center text-error mb-4" role="alert" aria-live="polite"></div>

    <form hx-post="{{host}}/app/{{.ID}}/oauth/enable" hx-target="previous .error-message" hx-swap="innerHTML"
      class="flex flex-col gap-4">

      <fieldset class="fieldset">
        <legend class="fieldset-legend">Redirect URI</legend>
        <input required name="redirect_uri" type="url" placeholder="https://example.com/callback"
          class="input w-full">
        <p class="text-xs opacity-60 mt-1">Where to send users after authorization</p>
      </fieldset>

      <fieldset class="fieldset">
        <legend class="fieldset-legend">Allowed Scopes</legend>
        <input required name="allowed_scopes" type="text" value="user:read" class="input w-full">
        <p class="text-xs opacity-60 mt-1">Available: user:read, user:write, repo:read, repo:write, app:read, app:write</p>
      </fieldset>

      <div class="alert alert-info">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span>After enabling OAuth, you'll receive a client secret. <strong>Save it immediately</strong> - it won't be shown again.</span>
      </div>

      <div class="mt-4">
        <button type="submit" class="btn btn-primary btn-block">
          Enable OAuth
        </button>
      </div>
    </form>
  </div>
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>
